{"ast":null,"code":"import _regeneratorRuntime from\"/Users/justin/Documents/Programming /meme-share/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/justin/Documents/Programming /meme-share/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/justin/Documents/Programming /meme-share/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import axios from\"axios\";import{returnErrors}from\"./errorActions\";import{GET_MY_POSTS,GET_POSTS,GET_POST,LOAD_MORE_POSTS,LOADING_MORE_POSTS,LOADING_MY_POSTS,GET_COMMENTS}from\"./types\";import{APIURL}from\"../config/vars\";export var getPost=function getPost(postId){return function(dispatch){axios.get(\"\".concat(APIURL,\"posts/\").concat(postId)).then(function(res){dispatch({type:GET_POST,payload:res.data.data});}).catch(function(err){dispatch(returnErrors(err.response.data,err.response.status));});};};export var getMyPosts=function getMyPosts(){return function(dispatch,getState){var user=getState().auth.user;if(user){dispatch({type:LOADING_MY_POSTS,payload:true});axios.get(\"\".concat(APIURL,\"posts?user=\").concat(user._id)).then(function(res){dispatch({type:GET_MY_POSTS,payload:res.data.data});dispatch({type:LOADING_MY_POSTS,payload:false});}).catch(function(err){dispatch(returnErrors(err.response.data,err.response.status));dispatch({type:LOADING_MY_POSTS,payload:false});});}};};export var getPosts=function getPosts(category){return function(dispatch){dispatch({type:GET_POSTS,payload:[]});if(category){axios.get(\"\".concat(APIURL,\"posts?category=\").concat(category)).then(function(res){dispatch({type:GET_POSTS,payload:res.data.data});}).catch(function(err){dispatch(returnErrors(err.response.data,err.response.status));});}else{axios.get(\"\".concat(APIURL,\"posts\")).then(function(res){dispatch({type:GET_POSTS,payload:res.data.data});}).catch(function(err){dispatch(returnErrors(err.response.data,err.response.status));});}};};export var loadMorePosts=function loadMorePosts(category){return function(dispatch,getState){var posts=getState().posts.posts;var page=getState().posts.page;dispatch({type:LOADING_MORE_POSTS,payload:true});if(category){axios.get(\"\".concat(APIURL,\"posts?category=\").concat(category,\"&page=\").concat(page+1)).then(function(res){var newPosts=[].concat(_toConsumableArray(posts),_toConsumableArray(res.data.data));dispatch({type:LOAD_MORE_POSTS,payload:newPosts,page:page+1});}).catch(function(err){dispatch(returnErrors(err.response.data,err.response.status));dispatch({type:LOADING_MORE_POSTS,payload:false});});}else{axios.get(\"\".concat(APIURL,\"posts?&page=\").concat(page)).then(function(res){var newPosts=[].concat(_toConsumableArray(posts),_toConsumableArray(res.data.data));dispatch({type:LOAD_MORE_POSTS,payload:newPosts,page:page+1});}).catch(function(err){dispatch(returnErrors(err.response.data,err.response.status));dispatch({type:LOADING_MORE_POSTS,payload:false});});}};};export var upVote=function upVote(post){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var user,posts,upVote,newPosts,removedUpVote,_newPosts;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:user=getState().auth;posts=getState().posts.posts;_context.next=4;return axios.post(\"\".concat(APIURL,\"votes/upvotepost\"),{post:post._id,user:user.user._id});case 4:upVote=_context.sent;if(!upVote.data.success){_context.next=11;break;}newPosts=[];posts.forEach(function(post){if(post._id!==upVote.data.data._id){newPosts.push(post);}else{var updatedPost={category:post.category,upVotes:upVote.data.data.upVotes,downVotes:upVote.data.data.downVotes,_id:post._id,title:post.title,content:post.content,user:post.user,createdAt:post.createdAt,__v:post.__v,comments:post.comments,id:post._id};newPosts.push(updatedPost);}});dispatch({type:GET_POSTS,payload:newPosts});_context.next=15;break;case 11:_context.next=13;return axios.put(\"\".concat(APIURL,\"votes/upvotepost\"),{post:post._id,user:user.user._id});case 13:removedUpVote=_context.sent;if(removedUpVote.data.success){_newPosts=[];posts.forEach(function(post){if(post._id!==removedUpVote.data.data._id){_newPosts.push(post);}else{var updatedPost={category:post.category,upVotes:removedUpVote.data.data.upVotes,downVotes:removedUpVote.data.data.downVotes,_id:post._id,title:post.title,content:post.content,user:post.user,createdAt:post.createdAt,__v:post.__v,comments:post.comments,id:post._id};_newPosts.push(updatedPost);}});dispatch({type:GET_POSTS,payload:_newPosts});}case 15:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var downVote=function downVote(post){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var user,posts,downVote,newPosts,removedDownVote,_newPosts2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:user=getState().auth;posts=getState().posts.posts;_context2.next=4;return axios.post(\"\".concat(APIURL,\"votes/downvotepost\"),{post:post._id,user:user.user._id});case 4:downVote=_context2.sent;if(!downVote.data.success){_context2.next=11;break;}newPosts=[];posts.forEach(function(post){if(post._id!==downVote.data.data._id){newPosts.push(post);}else{var updatedPost={category:post.category,upVotes:downVote.data.data.upVotes,downVotes:downVote.data.data.downVotes,_id:post._id,title:post.title,content:post.content,user:post.user,createdAt:post.createdAt,__v:post.__v,comments:post.comments,id:post._id};newPosts.push(updatedPost);}});dispatch({type:GET_POSTS,payload:newPosts});_context2.next=15;break;case 11:_context2.next=13;return axios.put(\"\".concat(APIURL,\"votes/downvotepost\"),{post:post._id,user:user.user._id});case 13:removedDownVote=_context2.sent;if(removedDownVote.data.success){_newPosts2=[];posts.forEach(function(post){if(post._id!==removedDownVote.data.data._id){_newPosts2.push(post);}else{var updatedPost={category:post.category,upVotes:removedDownVote.data.data.upVotes,downVotes:removedDownVote.data.data.downVotes,_id:post._id,title:post.title,content:post.content,user:post.user,createdAt:post.createdAt,__v:post.__v,comments:post.comments,id:post._id};_newPosts2.push(updatedPost);}});dispatch({type:GET_POSTS,payload:_newPosts2});}case 15:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();};export var postPageUpVote=function postPageUpVote(post){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var user,post,upVote,removedUpVote;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:user=getState().auth;post=getState().posts.post;_context3.next=4;return axios.post(\"\".concat(APIURL,\"votes/upvotepost\"),{post:post._id,user:user.user._id});case 4:upVote=_context3.sent;if(!upVote.data.success){_context3.next=9;break;}dispatch({type:GET_POST,payload:upVote.data.data});_context3.next=13;break;case 9:_context3.next=11;return axios.put(\"\".concat(APIURL,\"votes/upvotepost\"),{post:post._id,user:user.user._id});case 11:removedUpVote=_context3.sent;if(removedUpVote.data.success){dispatch({type:GET_POST,payload:removedUpVote.data.data});}case 13:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}();};export var postPageDownVote=function postPageDownVote(post){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var user,post,downVote,removedDownVote;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:user=getState().auth;post=getState().posts.post;_context4.next=4;return axios.post(\"\".concat(APIURL,\"votes/downvotepost\"),{post:post._id,user:user.user._id});case 4:downVote=_context4.sent;if(!downVote.data.success){_context4.next=9;break;}dispatch({type:GET_POST,payload:downVote.data.data});_context4.next=13;break;case 9:_context4.next=11;return axios.put(\"\".concat(APIURL,\"votes/downvotepost\"),{post:post._id,user:user.user._id});case 11:removedDownVote=_context4.sent;if(removedDownVote.data.success){dispatch({type:GET_POST,payload:removedDownVote.data.data});}case 13:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x7,_x8){return _ref4.apply(this,arguments);};}();};export var getComments=function getComments(postId){return function(dispatch){axios.get(\"\".concat(APIURL,\"posts/\").concat(postId,\"/comments\")).then(function(res){dispatch({type:GET_COMMENTS,payload:res.data.data});}).catch(function(err){dispatch(returnErrors(err.response.data,err.response.status));});};};export var deleteComment=function deleteComment(commentId){return function(dispatch,getState){var comments=getState().posts.comments;var newComments=[];comments.forEach(function(comment){if(comment._id.toString()!==commentId){newComments.push(comment);}});dispatch({type:GET_COMMENTS,payload:newComments});};};export var deletePost=function deletePost(postId){return function(dispatch,getState){var myPosts=getState().posts.myPosts;var newPosts=[];myPosts.forEach(function(post){if(post._id.toString()!==postId){newPosts.push(post);}});dispatch({type:GET_MY_POSTS,payload:newPosts});};};","map":{"version":3,"sources":["/Users/justin/Documents/Programming /meme-share/client/src/actions/postActions.js"],"names":["axios","returnErrors","GET_MY_POSTS","GET_POSTS","GET_POST","LOAD_MORE_POSTS","LOADING_MORE_POSTS","LOADING_MY_POSTS","GET_COMMENTS","APIURL","getPost","postId","dispatch","get","then","res","type","payload","data","catch","err","response","status","getMyPosts","getState","user","auth","_id","getPosts","category","loadMorePosts","posts","page","newPosts","upVote","post","success","forEach","push","updatedPost","upVotes","downVotes","title","content","createdAt","__v","comments","id","put","removedUpVote","downVote","removedDownVote","postPageUpVote","postPageDownVote","getComments","deleteComment","commentId","newComments","comment","toString","deletePost","myPosts"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { returnErrors } from \"./errorActions\";\n\nimport {\n  GET_MY_POSTS,\n  GET_POSTS,\n  GET_POST,\n  LOAD_MORE_POSTS,\n  LOADING_MORE_POSTS,\n  LOADING_MY_POSTS,\n  GET_COMMENTS,\n} from \"./types\";\n\nimport { APIURL } from \"../config/vars\";\n\nexport const getPost = (postId) => (dispatch) => {\n  axios\n    .get(`${APIURL}posts/${postId}`)\n    .then((res) => {\n      dispatch({\n        type: GET_POST,\n        payload: res.data.data,\n      });\n    })\n    .catch((err) => {\n      dispatch(returnErrors(err.response.data, err.response.status));\n    });\n};\n\nexport const getMyPosts = () => (dispatch, getState) => {\n  const user = getState().auth.user;\n  if (user) {\n    dispatch({\n      type: LOADING_MY_POSTS,\n      payload: true,\n    });\n    axios\n      .get(`${APIURL}posts?user=${user._id}`)\n      .then((res) => {\n        dispatch({\n          type: GET_MY_POSTS,\n          payload: res.data.data,\n        });\n        dispatch({\n          type: LOADING_MY_POSTS,\n          payload: false,\n        });\n      })\n      .catch((err) => {\n        dispatch(returnErrors(err.response.data, err.response.status));\n        dispatch({\n          type: LOADING_MY_POSTS,\n          payload: false,\n        });\n      });\n  }\n};\n\nexport const getPosts = (category) => (dispatch) => {\n  dispatch({\n    type: GET_POSTS,\n    payload: [],\n  });\n  if (category) {\n    axios\n      .get(`${APIURL}posts?category=${category}`)\n      .then((res) => {\n        dispatch({\n          type: GET_POSTS,\n          payload: res.data.data,\n        });\n      })\n      .catch((err) => {\n        dispatch(returnErrors(err.response.data, err.response.status));\n      });\n  } else {\n    axios\n      .get(`${APIURL}posts`)\n      .then((res) => {\n        dispatch({\n          type: GET_POSTS,\n          payload: res.data.data,\n        });\n      })\n      .catch((err) => {\n        dispatch(returnErrors(err.response.data, err.response.status));\n      });\n  }\n};\n\nexport const loadMorePosts = (category) => (dispatch, getState) => {\n  const posts = getState().posts.posts;\n  const page = getState().posts.page;\n  dispatch({\n    type: LOADING_MORE_POSTS,\n    payload: true,\n  });\n  if (category) {\n    axios\n      .get(`${APIURL}posts?category=${category}&page=${page + 1}`)\n      .then((res) => {\n        const newPosts = [...posts, ...res.data.data];\n        dispatch({\n          type: LOAD_MORE_POSTS,\n          payload: newPosts,\n          page: page + 1,\n        });\n      })\n      .catch((err) => {\n        dispatch(returnErrors(err.response.data, err.response.status));\n        dispatch({\n          type: LOADING_MORE_POSTS,\n          payload: false,\n        });\n      });\n  } else {\n    axios\n      .get(`${APIURL}posts?&page=${page}`)\n      .then((res) => {\n        const newPosts = [...posts, ...res.data.data];\n        dispatch({\n          type: LOAD_MORE_POSTS,\n          payload: newPosts,\n          page: page + 1,\n        });\n      })\n      .catch((err) => {\n        dispatch(returnErrors(err.response.data, err.response.status));\n        dispatch({\n          type: LOADING_MORE_POSTS,\n          payload: false,\n        });\n      });\n  }\n};\n\nexport const upVote = (post) => async (dispatch, getState) => {\n  const user = getState().auth;\n  const posts = getState().posts.posts;\n\n  const upVote = await axios.post(`${APIURL}votes/upvotepost`, {\n    post: post._id,\n    user: user.user._id,\n  });\n\n  if (upVote.data.success) {\n    let newPosts = [];\n    posts.forEach((post) => {\n      if (post._id !== upVote.data.data._id) {\n        newPosts.push(post);\n      } else {\n        const updatedPost = {\n          category: post.category,\n          upVotes: upVote.data.data.upVotes,\n          downVotes: upVote.data.data.downVotes,\n          _id: post._id,\n          title: post.title,\n          content: post.content,\n          user: post.user,\n          createdAt: post.createdAt,\n          __v: post.__v,\n          comments: post.comments,\n          id: post._id,\n        };\n        newPosts.push(updatedPost);\n      }\n    });\n    dispatch({\n      type: GET_POSTS,\n      payload: newPosts,\n    });\n  } else {\n    // remove up vote with put request\n    const removedUpVote = await axios.put(`${APIURL}votes/upvotepost`, {\n      post: post._id,\n      user: user.user._id,\n    });\n\n    if (removedUpVote.data.success) {\n      let newPosts = [];\n      posts.forEach((post) => {\n        if (post._id !== removedUpVote.data.data._id) {\n          newPosts.push(post);\n        } else {\n          const updatedPost = {\n            category: post.category,\n            upVotes: removedUpVote.data.data.upVotes,\n            downVotes: removedUpVote.data.data.downVotes,\n            _id: post._id,\n            title: post.title,\n            content: post.content,\n            user: post.user,\n            createdAt: post.createdAt,\n            __v: post.__v,\n            comments: post.comments,\n            id: post._id,\n          };\n          newPosts.push(updatedPost);\n        }\n      });\n      dispatch({\n        type: GET_POSTS,\n        payload: newPosts,\n      });\n    }\n  }\n};\n\nexport const downVote = (post) => async (dispatch, getState) => {\n  const user = getState().auth;\n  const posts = getState().posts.posts;\n\n  const downVote = await axios.post(`${APIURL}votes/downvotepost`, {\n    post: post._id,\n    user: user.user._id,\n  });\n\n  if (downVote.data.success) {\n    let newPosts = [];\n    posts.forEach((post) => {\n      if (post._id !== downVote.data.data._id) {\n        newPosts.push(post);\n      } else {\n        const updatedPost = {\n          category: post.category,\n          upVotes: downVote.data.data.upVotes,\n          downVotes: downVote.data.data.downVotes,\n          _id: post._id,\n          title: post.title,\n          content: post.content,\n          user: post.user,\n          createdAt: post.createdAt,\n          __v: post.__v,\n          comments: post.comments,\n          id: post._id,\n        };\n        newPosts.push(updatedPost);\n      }\n    });\n    dispatch({\n      type: GET_POSTS,\n      payload: newPosts,\n    });\n  } else {\n    const removedDownVote = await axios.put(`${APIURL}votes/downvotepost`, {\n      post: post._id,\n      user: user.user._id,\n    });\n\n    if (removedDownVote.data.success) {\n      let newPosts = [];\n      posts.forEach((post) => {\n        if (post._id !== removedDownVote.data.data._id) {\n          newPosts.push(post);\n        } else {\n          const updatedPost = {\n            category: post.category,\n            upVotes: removedDownVote.data.data.upVotes,\n            downVotes: removedDownVote.data.data.downVotes,\n            _id: post._id,\n            title: post.title,\n            content: post.content,\n            user: post.user,\n            createdAt: post.createdAt,\n            __v: post.__v,\n            comments: post.comments,\n            id: post._id,\n          };\n          newPosts.push(updatedPost);\n        }\n      });\n      dispatch({\n        type: GET_POSTS,\n        payload: newPosts,\n      });\n    }\n  }\n};\n\nexport const postPageUpVote = (post) => async (dispatch, getState) => {\n  const user = getState().auth;\n  const post = getState().posts.post;\n\n  const upVote = await axios.post(`${APIURL}votes/upvotepost`, {\n    post: post._id,\n    user: user.user._id,\n  });\n\n  if (upVote.data.success) {\n    dispatch({\n      type: GET_POST,\n      payload: upVote.data.data,\n    });\n  } else {\n    // remove up vote with put request\n    const removedUpVote = await axios.put(`${APIURL}votes/upvotepost`, {\n      post: post._id,\n      user: user.user._id,\n    });\n\n    if (removedUpVote.data.success) {\n      dispatch({\n        type: GET_POST,\n        payload: removedUpVote.data.data,\n      });\n    }\n  }\n};\n\nexport const postPageDownVote = (post) => async (dispatch, getState) => {\n  const user = getState().auth;\n  const post = getState().posts.post;\n\n  const downVote = await axios.post(`${APIURL}votes/downvotepost`, {\n    post: post._id,\n    user: user.user._id,\n  });\n\n  if (downVote.data.success) {\n    dispatch({\n      type: GET_POST,\n      payload: downVote.data.data,\n    });\n  } else {\n    // remove up vote with put request\n    const removedDownVote = await axios.put(`${APIURL}votes/downvotepost`, {\n      post: post._id,\n      user: user.user._id,\n    });\n\n    if (removedDownVote.data.success) {\n      dispatch({\n        type: GET_POST,\n        payload: removedDownVote.data.data,\n      });\n    }\n  }\n};\n\nexport const getComments = (postId) => (dispatch) => {\n  axios\n    .get(`${APIURL}posts/${postId}/comments`)\n    .then((res) => {\n      dispatch({\n        type: GET_COMMENTS,\n        payload: res.data.data,\n      });\n    })\n    .catch((err) => {\n      dispatch(returnErrors(err.response.data, err.response.status));\n    });\n};\n\nexport const deleteComment = (commentId) => (dispatch, getState) => {\n  const comments = getState().posts.comments;\n  let newComments = [];\n  comments.forEach((comment) => {\n    if (comment._id.toString() !== commentId) {\n      newComments.push(comment);\n    }\n  });\n  dispatch({\n    type: GET_COMMENTS,\n    payload: newComments,\n  });\n};\n\nexport const deletePost = (postId) => (dispatch, getState) => {\n  const myPosts = getState().posts.myPosts;\n  let newPosts = [];\n  myPosts.forEach((post) => {\n    if (post._id.toString() !== postId) {\n      newPosts.push(post);\n    }\n  });\n  dispatch({\n    type: GET_MY_POSTS,\n    payload: newPosts,\n  });\n};\n"]},"metadata":{},"sourceType":"module"}