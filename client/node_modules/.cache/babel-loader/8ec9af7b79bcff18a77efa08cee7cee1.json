{"ast":null,"code":"import _regeneratorRuntime from\"/Users/justin/Documents/Programming /meme-share/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/justin/Documents/Programming /meme-share/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/justin/Documents/Programming /meme-share/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/justin/Documents/Programming /meme-share/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState}from\"react\";import Colors from\"../../../config/colors\";import axios from\"axios\";import{useDispatch}from\"react-redux\";import{loadUser,login}from\"../../../actions/authActions\";import globalStyles from\"../../../config/globalStyles\";import{APIURL}from\"../../../config/vars\";import Input from\"../../UI/Input\";import Button from\"../../UI/Button\";import Link from\"../../UI/Link\";import Loading from\"../../UI/Loading\";import{store}from\"react-notifications-component\";export var SignUpHeader=function SignUpHeader(){return/*#__PURE__*/React.createElement(\"div\",{style:styles.header},/*#__PURE__*/React.createElement(\"b\",null,\"MEME SHARE\"));};export var SignUpFooter=function SignUpFooter(){return/*#__PURE__*/React.createElement(\"div\",{style:styles.link},/*#__PURE__*/React.createElement(Link,{style:styles.linkBtn,to:\"/login\"},/*#__PURE__*/React.createElement(Button,{style:_objectSpread(_objectSpread({},styles.footerBtn),{},{backgroundColor:Colors.tertiary}),title:\"Login\"})));};var SignUpForm=function SignUpForm(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),nameError=_useState12[0],setNameError=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),emailError=_useState14[0],setEmailError=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),passwordError=_useState16[0],setPasswordError=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),confirmPasswordError=_useState18[0],setConfrimPasswordError=_useState18[1];var dispatch=useDispatch();var handleNameChange=function handleNameChange(e){setName(e.target.value);};var handleEmailChange=function handleEmailChange(e){setEmail(e.target.value);};var handlePasswordChange=function handlePasswordChange(e){setPassword(e.target.value);};var handleConfirmPasswordChange=function handleConfirmPasswordChange(e){setConfirmPassword(e.target.value);};var handleSignUp=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var re,checkEmail,body;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setLoading(true);setEmailError(false);setNameError(false);setPasswordError(false);setConfrimPasswordError(false);re=new RegExp(/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);if(re.test(email)){_context.next=12;break;}setLoading(false);setEmailError(true);store.addNotification({title:\"Error!\",message:\"Please enter a valid email address\",type:\"danger\",insert:\"top\",container:\"top-center\",animationIn:[\"animate__animated\",\"animate__fadeIn\"],animationOut:[\"animate__animated\",\"animate__fadeOut\"],dismiss:{duration:5000,onScreen:true}});return _context.abrupt(\"return\");case 12:_context.next=14;return axios.post(\"\".concat(APIURL,\"check/email\"),{email:email.toLowerCase()});case 14:checkEmail=_context.sent;if(checkEmail.data.success){_context.next=20;break;}setEmailError(true);setLoading(false);store.addNotification({title:\"Error!\",message:\"Email already in use\",type:\"danger\",insert:\"top\",container:\"top-center\",animationIn:[\"animate__animated\",\"animate__fadeIn\"],animationOut:[\"animate__animated\",\"animate__fadeOut\"],dismiss:{duration:5000,onScreen:true}});return _context.abrupt(\"return\");case 20:if(!(name.length<1)){_context.next=25;break;}setNameError(true);setLoading(false);store.addNotification({title:\"Error!\",message:\"Please enter your name\",type:\"danger\",insert:\"top\",container:\"top-center\",animationIn:[\"animate__animated\",\"animate__fadeIn\"],animationOut:[\"animate__animated\",\"animate__fadeOut\"],dismiss:{duration:5000,onScreen:true}});return _context.abrupt(\"return\");case 25:if(!(password.length<6)){_context.next=30;break;}setPasswordError(true);setLoading(false);store.addNotification({title:\"Error!\",message:\"Passwords needs to be at least 6 characters\",type:\"danger\",insert:\"top\",container:\"top-center\",animationIn:[\"animate__animated\",\"animate__fadeIn\"],animationOut:[\"animate__animated\",\"animate__fadeOut\"],dismiss:{duration:5000,onScreen:true}});return _context.abrupt(\"return\");case 30:if(!(password!==confirmPassword)){_context.next=36;break;}setPasswordError(true);setConfrimPasswordError(true);setLoading(false);store.addNotification({title:\"Error!\",message:\"Passwords do not match\",type:\"danger\",insert:\"top\",container:\"top-center\",animationIn:[\"animate__animated\",\"animate__fadeIn\"],animationOut:[\"animate__animated\",\"animate__fadeOut\"],dismiss:{duration:5000,onScreen:true}});return _context.abrupt(\"return\");case 36:body={email:email.toLowerCase(),name:name,password:password};axios.post(\"\".concat(APIURL,\"auth/register\"),body).then(function(res){setName(\"\");setEmail(\"\");setPassword(\"\");setConfirmPassword(\"\");dispatch(login(res.data.token));dispatch(loadUser());setLoading(false);}).catch(function(err){setLoading(false);store.addNotification({title:\"Error!\",message:\"Oops... Something went wrong. Please try again\",type:\"danger\",insert:\"top\",container:\"top-center\",animationIn:[\"animate__animated\",\"animate__fadeIn\"],animationOut:[\"animate__animated\",\"animate__fadeOut\"],dismiss:{duration:5000,onScreen:true}});});case 38:case\"end\":return _context.stop();}}},_callee);}));return function handleSignUp(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSignUp,style:styles.form},/*#__PURE__*/React.createElement(Input,{value:email,onChange:handleEmailChange,type:\"email\",placeholder:\"Email\",style:emailError?_objectSpread(_objectSpread({},styles.input),globalStyles.errorValidation):styles.input}),/*#__PURE__*/React.createElement(Input,{value:name,min:2,onChange:handleNameChange,type:\"text\",placeholder:\"Name\",style:nameError?_objectSpread(_objectSpread({},styles.input),globalStyles.errorValidation):styles.input}),/*#__PURE__*/React.createElement(Input,{value:password,onChange:handlePasswordChange,type:\"password\",placeholder:\"Password\",style:passwordError?_objectSpread(_objectSpread({},styles.input),globalStyles.errorValidation):styles.input}),/*#__PURE__*/React.createElement(Input,{value:confirmPassword,onChange:handleConfirmPasswordChange,type:\"password\",placeholder:\"Confirm Password\",style:confirmPasswordError?_objectSpread(_objectSpread({},styles.input),globalStyles.errorValidation):styles.input}),loading?/*#__PURE__*/React.createElement(Loading,null):/*#__PURE__*/React.createElement(Button,{style:styles.button,type:\"submit\",title:\"Sign Up\"})));};var styles={button:{margin:5,width:\"100%\",backgroundColor:Colors.primary},input:{margin:5,width:\"100%\"},form:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",flexDirection:\"column\"},linkText:{fontSize:12,margin:4,color:\"#f1f1f1\"},header:{color:Colors.primary,fontSize:32,fontFamily:globalStyles.titleFont},link:{display:\"flex\",alignItems:\"center\",flexDirection:\"column\",width:\"100%\"},linkBtn:{marginLeft:2,marginRight:2,width:\"100%\"},footerBtn:{marginTop:5,marginBottom:5,width:\"100%\"},roleBtn:{padding:5,width:\"80px\",margin:\"2px\",border:\"none\",borderRadius:globalStyles.borderRadius,boxShadow:globalStyles.boxShadow}};export default SignUpForm;","map":{"version":3,"sources":["/Users/justin/Documents/Programming /meme-share/client/src/components/singleUse/signup/SignUpForm.jsx"],"names":["React","useState","Colors","axios","useDispatch","loadUser","login","globalStyles","APIURL","Input","Button","Link","Loading","store","SignUpHeader","styles","header","SignUpFooter","link","linkBtn","footerBtn","backgroundColor","tertiary","SignUpForm","props","email","setEmail","name","setName","password","setPassword","confirmPassword","setConfirmPassword","loading","setLoading","nameError","setNameError","emailError","setEmailError","passwordError","setPasswordError","confirmPasswordError","setConfrimPasswordError","dispatch","handleNameChange","e","target","value","handleEmailChange","handlePasswordChange","handleConfirmPasswordChange","handleSignUp","preventDefault","re","RegExp","test","addNotification","title","message","type","insert","container","animationIn","animationOut","dismiss","duration","onScreen","post","toLowerCase","checkEmail","data","success","length","body","then","res","token","catch","err","form","input","errorValidation","button","margin","width","primary","display","alignItems","justifyContent","flexDirection","linkText","fontSize","color","fontFamily","titleFont","marginLeft","marginRight","marginTop","marginBottom","roleBtn","padding","border","borderRadius","boxShadow"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\n\nimport Colors from \"../../../config/colors\";\n\nimport axios from \"axios\";\nimport { useDispatch } from \"react-redux\";\nimport { loadUser, login } from \"../../../actions/authActions\";\n\nimport globalStyles from \"../../../config/globalStyles\";\n\nimport { APIURL } from \"../../../config/vars\";\n\nimport Input from \"../../UI/Input\";\nimport Button from \"../../UI/Button\";\nimport Link from \"../../UI/Link\";\nimport Loading from \"../../UI/Loading\";\n\nimport { store } from \"react-notifications-component\";\n\nexport const SignUpHeader = () => {\n  return (\n    <div style={styles.header}>\n      <b>MEME SHARE</b>\n    </div>\n  );\n};\n\nexport const SignUpFooter = () => {\n  return (\n    <div style={styles.link}>\n      <Link style={styles.linkBtn} to=\"/login\">\n        <Button\n          style={{ ...styles.footerBtn, backgroundColor: Colors.tertiary }}\n          title=\"Login\"\n        />\n      </Link>\n    </div>\n  );\n};\n\nconst SignUpForm = (props) => {\n  const [email, setEmail] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [nameError, setNameError] = useState(false);\n  const [emailError, setEmailError] = useState(false);\n  const [passwordError, setPasswordError] = useState(false);\n  const [confirmPasswordError, setConfrimPasswordError] = useState(false);\n\n  const dispatch = useDispatch();\n\n  const handleNameChange = (e) => {\n    setName(e.target.value);\n  };\n\n  const handleEmailChange = (e) => {\n    setEmail(e.target.value);\n  };\n\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value);\n  };\n\n  const handleConfirmPasswordChange = (e) => {\n    setConfirmPassword(e.target.value);\n  };\n\n  const handleSignUp = async (e) => {\n    e.preventDefault();\n\n    setLoading(true);\n    setEmailError(false);\n    setNameError(false);\n    setPasswordError(false);\n    setConfrimPasswordError(false);\n\n    const re = new RegExp(\n      /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n    );\n    if (!re.test(email)) {\n      setLoading(false);\n      setEmailError(true);\n      store.addNotification({\n        title: \"Error!\",\n        message: \"Please enter a valid email address\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true,\n        },\n      });\n      return;\n    }\n\n    const checkEmail = await axios.post(`${APIURL}check/email`, {\n      email: email.toLowerCase(),\n    });\n\n    if (!checkEmail.data.success) {\n      setEmailError(true);\n      setLoading(false);\n      store.addNotification({\n        title: \"Error!\",\n        message: \"Email already in use\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true,\n        },\n      });\n      return;\n    }\n\n    if (name.length < 1) {\n      setNameError(true);\n      setLoading(false);\n      store.addNotification({\n        title: \"Error!\",\n        message: \"Please enter your name\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true,\n        },\n      });\n      return;\n    }\n\n    if (password.length < 6) {\n      setPasswordError(true);\n      setLoading(false);\n      store.addNotification({\n        title: \"Error!\",\n        message: \"Passwords needs to be at least 6 characters\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true,\n        },\n      });\n      return;\n    }\n\n    if (password !== confirmPassword) {\n      setPasswordError(true);\n      setConfrimPasswordError(true);\n      setLoading(false);\n      store.addNotification({\n        title: \"Error!\",\n        message: \"Passwords do not match\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true,\n        },\n      });\n      return;\n    }\n\n    const body = {\n      email: email.toLowerCase(),\n      name: name,\n      password: password,\n    };\n\n    axios\n      .post(`${APIURL}auth/register`, body)\n      .then((res) => {\n        setName(\"\");\n        setEmail(\"\");\n        setPassword(\"\");\n        setConfirmPassword(\"\");\n        dispatch(login(res.data.token));\n        dispatch(loadUser());\n        setLoading(false);\n      })\n      .catch((err) => {\n        setLoading(false);\n        store.addNotification({\n          title: \"Error!\",\n          message: \"Oops... Something went wrong. Please try again\",\n          type: \"danger\",\n          insert: \"top\",\n          container: \"top-center\",\n          animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n          animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n          dismiss: {\n            duration: 5000,\n            onScreen: true,\n          },\n        });\n      });\n  };\n\n  return (\n    <div>\n      <form onSubmit={handleSignUp} style={styles.form}>\n        <Input\n          value={email}\n          onChange={handleEmailChange}\n          type=\"email\"\n          placeholder=\"Email\"\n          style={\n            emailError\n              ? { ...styles.input, ...globalStyles.errorValidation }\n              : styles.input\n          }\n        />\n        <Input\n          value={name}\n          min={2}\n          onChange={handleNameChange}\n          type=\"text\"\n          placeholder=\"Name\"\n          style={\n            nameError\n              ? { ...styles.input, ...globalStyles.errorValidation }\n              : styles.input\n          }\n        />\n        <Input\n          value={password}\n          onChange={handlePasswordChange}\n          type=\"password\"\n          placeholder=\"Password\"\n          style={\n            passwordError\n              ? { ...styles.input, ...globalStyles.errorValidation }\n              : styles.input\n          }\n        />\n        <Input\n          value={confirmPassword}\n          onChange={handleConfirmPasswordChange}\n          type=\"password\"\n          placeholder=\"Confirm Password\"\n          style={\n            confirmPasswordError\n              ? { ...styles.input, ...globalStyles.errorValidation }\n              : styles.input\n          }\n        />\n        {loading ? (\n          <Loading />\n        ) : (\n          <Button style={styles.button} type=\"submit\" title=\"Sign Up\" />\n        )}\n      </form>\n    </div>\n  );\n};\n\nconst styles = {\n  button: {\n    margin: 5,\n    width: \"100%\",\n    backgroundColor: Colors.primary,\n  },\n  input: {\n    margin: 5,\n    width: \"100%\",\n  },\n  form: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n  },\n  linkText: {\n    fontSize: 12,\n    margin: 4,\n    color: \"#f1f1f1\",\n  },\n  header: {\n    color: Colors.primary,\n    fontSize: 32,\n    fontFamily: globalStyles.titleFont,\n  },\n  link: {\n    display: \"flex\",\n    alignItems: \"center\",\n    flexDirection: \"column\",\n    width: \"100%\",\n  },\n  linkBtn: {\n    marginLeft: 2,\n    marginRight: 2,\n    width: \"100%\",\n  },\n  footerBtn: {\n    marginTop: 5,\n    marginBottom: 5,\n    width: \"100%\",\n  },\n  roleBtn: {\n    padding: 5,\n    width: \"80px\",\n    margin: \"2px\",\n    border: \"none\",\n    borderRadius: globalStyles.borderRadius,\n    boxShadow: globalStyles.boxShadow,\n  },\n};\n\nexport default SignUpForm;\n"]},"metadata":{},"sourceType":"module"}