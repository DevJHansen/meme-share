{"ast":null,"code":"import _objectSpread from\"/Users/justin/Documents/Programming /meme-share/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/justin/Documents/Programming /meme-share/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import globalStyles from\"../../config/globalStyles\";import colors from\"../../config/colors\";import{MdKeyboardArrowUp,MdKeyboardArrowDown,MdDelete}from\"react-icons/md\";import Link from\"../UI/Link\";import TextArea from\"../UI/TextArea\";import Button from\"../UI/Button\";import{useSelector,useDispatch}from\"react-redux\";import{postPageUpVote,postPageDownVote,getComments,deleteComment}from\"../../actions/postActions\";import axios from\"axios\";import{APIURL}from\"../../config/vars\";import{store}from\"react-notifications-component\";var FullMemeCard=function FullMemeCard(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),newComment=_useState2[0],setNewComment=_useState2[1];var dispatch=useDispatch();var post=props.post,toggleModal=props.toggleModal,comments=props.comments;var auth=useSelector(function(state){return{auth:state.auth};},[]);var checkUpvote=post.upVotes.find(function(upVote){return upVote===auth.auth.userId;});var upVotePost=function upVotePost(post){if(!auth.auth.user){toggleModal();}else{dispatch(postPageUpVote(post));}};var checkDownvote=post.downVotes.find(function(downVote){return downVote===auth.auth.userId;});var downVotePost=function downVotePost(post){if(!auth.auth.user){toggleModal();}else{dispatch(postPageDownVote(post));}};var handleComment=function handleComment(){if(!auth.auth.user){toggleModal();return;}if(!newComment){store.addNotification({title:\"Error!\",message:\"Comments can't be empty\",type:\"danger\",insert:\"top\",container:\"top-center\",animationIn:[\"animate__animated\",\"animate__fadeIn\"],animationOut:[\"animate__animated\",\"animate__fadeOut\"],dismiss:{duration:5000,onScreen:true}});return;}var config={headers:{Authorization:\"Bearer \".concat(auth.auth.token)}};var body={post:post._id,comment:newComment,user:auth.auth.user._id,name:auth.auth.user.name};axios.post(\"\".concat(APIURL,\"posts/\").concat(post._id,\"/comments\"),body,config).then(function(){dispatch(getComments(post._id));setNewComment(\"\");}).catch(function(){store.addNotification({title:\"Error!\",message:\"Something went wrong uploading your comment\",type:\"danger\",insert:\"top\",container:\"top-center\",animationIn:[\"animate__animated\",\"animate__fadeIn\"],animationOut:[\"animate__animated\",\"animate__fadeOut\"],dismiss:{duration:5000,onScreen:true}});});};var handleDelete=function handleDelete(comment){var config={headers:{Authorization:\"Bearer \".concat(auth.auth.token)}};axios.delete(\"\".concat(APIURL,\"posts/\").concat(post._id,\"/comments/\").concat(comment._id),config).then(function(){dispatch(deleteComment(comment._id));}).catch(function(){store.addNotification({title:\"Error!\",message:\"Something went wrong deleting your comment\",type:\"danger\",insert:\"top\",container:\"top-center\",animationIn:[\"animate__animated\",\"animate__fadeIn\"],animationOut:[\"animate__animated\",\"animate__fadeOut\"],dismiss:{duration:5000,onScreen:true}});});};return/*#__PURE__*/React.createElement(\"div\",{style:styles.card},/*#__PURE__*/React.createElement(\"p\",{style:_objectSpread(_objectSpread({},styles.category),globalStyles.hint)},post.category.charAt(0).toUpperCase()+post.category.slice(1)),/*#__PURE__*/React.createElement(Link,{to:\"post/\".concat(post._id)},/*#__PURE__*/React.createElement(\"h3\",{style:styles.title},post.title)),/*#__PURE__*/React.createElement(\"div\",null,post.content.endsWith(\"mp4\")||post.content.endsWith(\"ogg\")||post.content.endsWith(\"webm\")?/*#__PURE__*/React.createElement(\"video\",{src:post.content,style:styles.content,controls:true}):/*#__PURE__*/React.createElement(\"img\",{src:post.content,style:styles.content,alt:post.title})),/*#__PURE__*/React.createElement(\"div\",{style:styles.interactions},/*#__PURE__*/React.createElement(\"div\",{style:styles.interaction,onClick:function onClick(){return upVotePost(post);}},!auth.auth.isAuthenticated?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(MdKeyboardArrowUp,{style:globalStyles.icon}),/*#__PURE__*/React.createElement(\"p\",{style:styles.interactionNumber},post.upVotes.length)):checkUpvote?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(MdKeyboardArrowUp,{style:_objectSpread(_objectSpread({},globalStyles.icon),{},{color:colors.green})}),/*#__PURE__*/React.createElement(\"p\",{style:_objectSpread(_objectSpread({},styles.interactionNumber),{},{color:colors.green})},post.upVotes.length)):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(MdKeyboardArrowUp,{style:globalStyles.icon}),/*#__PURE__*/React.createElement(\"p\",{style:styles.interactionNumber},post.upVotes.length))),/*#__PURE__*/React.createElement(\"div\",{style:styles.interaction,onClick:function onClick(){return downVotePost(post);}},!auth.auth.isAuthenticated?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(MdKeyboardArrowDown,{style:globalStyles.icon}),/*#__PURE__*/React.createElement(\"p\",{style:styles.interactionNumber},post.downVotes.length)):checkDownvote?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(MdKeyboardArrowDown,{style:_objectSpread(_objectSpread({},globalStyles.icon),{},{color:colors.tertiary})}),/*#__PURE__*/React.createElement(\"p\",{style:_objectSpread(_objectSpread({},styles.interactionNumber),{},{color:colors.tertiary})},post.downVotes.length)):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(MdKeyboardArrowDown,{style:globalStyles.icon}),/*#__PURE__*/React.createElement(\"p\",{style:styles.interactionNumber},post.downVotes.length)))),/*#__PURE__*/React.createElement(\"div\",{style:styles.commentsContainer},/*#__PURE__*/React.createElement(\"h3\",null,\"Comments (\".concat(comments.length,\")\")),/*#__PURE__*/React.createElement(TextArea,{value:newComment,onChange:function onChange(e){return setNewComment(e.target.value);},placeholder:\"Add comment...\",style:styles.textArea}),/*#__PURE__*/React.createElement(Button,{style:styles.postBtn,title:\"Post\",handlePress:handleComment})),/*#__PURE__*/React.createElement(\"div\",{style:styles.comments},comments.slice(0).reverse().map(function(comment,i){return/*#__PURE__*/React.createElement(\"div\",{style:styles.commentContainer,key:i},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h5\",{style:styles.commentName},comment.name),/*#__PURE__*/React.createElement(\"p\",{style:styles.comment},comment.comment)),/*#__PURE__*/React.createElement(\"div\",null,comment.user===auth.auth.userId?/*#__PURE__*/React.createElement(MdDelete,{style:{cursor:\"pointer\"},onClick:function onClick(){return handleDelete(comment);}}):null));})));};var styles={card:{backgroundColor:\"white\",marginTop:20,paddingTop:10,paddingBottom:10,paddingRight:20,paddingLeft:20,borderRadius:globalStyles.borderRadius,boxShadow:globalStyles.boxShadowDark,maxWidth:\"100%\"},title:{marginTop:10,marginBottom:10},category:{marginTop:0,marginBottom:10},content:{width:\"100%\",height:\"auto\"},interactions:{display:\"flex\",flexDirection:\"row\",marginTop:10,marginBottom:10},interaction:{borderRadius:globalStyles.borderRadius,boxShadow:globalStyles.boxShadow,paddingLeft:10,paddingRight:10,display:\"flex\",flexDirection:\"row\",justifyContent:\"center\",alignItems:\"center\",cursor:\"pointer\"},interactionNumber:{marginLeft:5},textArea:{border:\"1px solid black\",width:\"100%\"},postBtn:{marginTop:15,backgroundColor:colors.tertiary},comments:{marginTop:20,paddingTop:10,borderTop:\"1px solid grey\"},commentContainer:{marginTop:20,marginBottom:20,display:\"flex\",justifyContent:\"space-between\"},commentName:{margin:0,color:colors.primary},comment:{margin:0,marginTop:5}};export default FullMemeCard;","map":{"version":3,"sources":["/Users/justin/Documents/Programming /meme-share/client/src/components/UI/FullMemeCard.jsx"],"names":["React","useState","globalStyles","colors","MdKeyboardArrowUp","MdKeyboardArrowDown","MdDelete","Link","TextArea","Button","useSelector","useDispatch","postPageUpVote","postPageDownVote","getComments","deleteComment","axios","APIURL","store","FullMemeCard","props","newComment","setNewComment","dispatch","post","toggleModal","comments","auth","state","checkUpvote","upVotes","find","upVote","userId","upVotePost","user","checkDownvote","downVotes","downVote","downVotePost","handleComment","addNotification","title","message","type","insert","container","animationIn","animationOut","dismiss","duration","onScreen","config","headers","Authorization","token","body","_id","comment","name","then","catch","handleDelete","delete","styles","card","category","hint","charAt","toUpperCase","slice","content","endsWith","interactions","interaction","isAuthenticated","icon","interactionNumber","length","color","green","tertiary","commentsContainer","e","target","value","textArea","postBtn","reverse","map","i","commentContainer","commentName","cursor","backgroundColor","marginTop","paddingTop","paddingBottom","paddingRight","paddingLeft","borderRadius","boxShadow","boxShadowDark","maxWidth","marginBottom","width","height","display","flexDirection","justifyContent","alignItems","marginLeft","border","borderTop","margin","primary"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\n\nimport globalStyles from \"../../config/globalStyles\";\nimport colors from \"../../config/colors\";\nimport {\n  MdKeyboardArrowUp,\n  MdKeyboardArrowDown,\n  MdDelete,\n} from \"react-icons/md\";\nimport Link from \"../UI/Link\";\nimport TextArea from \"../UI/TextArea\";\nimport Button from \"../UI/Button\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  postPageUpVote,\n  postPageDownVote,\n  getComments,\n  deleteComment,\n} from \"../../actions/postActions\";\nimport axios from \"axios\";\nimport { APIURL } from \"../../config/vars\";\nimport { store } from \"react-notifications-component\";\n\nconst FullMemeCard = (props) => {\n  const [newComment, setNewComment] = useState(\"\");\n  const dispatch = useDispatch();\n  const { post, toggleModal, comments } = props;\n\n  const auth = useSelector(\n    (state) => ({\n      auth: state.auth,\n    }),\n    []\n  );\n\n  const checkUpvote = post.upVotes.find(\n    (upVote) => upVote === auth.auth.userId\n  );\n\n  const upVotePost = (post) => {\n    if (!auth.auth.user) {\n      toggleModal();\n    } else {\n      dispatch(postPageUpVote(post));\n    }\n  };\n\n  const checkDownvote = post.downVotes.find(\n    (downVote) => downVote === auth.auth.userId\n  );\n\n  const downVotePost = (post) => {\n    if (!auth.auth.user) {\n      toggleModal();\n    } else {\n      dispatch(postPageDownVote(post));\n    }\n  };\n\n  const handleComment = () => {\n    if (!auth.auth.user) {\n      toggleModal();\n      return;\n    }\n    if (!newComment) {\n      store.addNotification({\n        title: \"Error!\",\n        message: \"Comments can't be empty\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true,\n        },\n      });\n      return;\n    }\n\n    const config = {\n      headers: {\n        Authorization: `Bearer ${auth.auth.token}`,\n      },\n    };\n\n    const body = {\n      post: post._id,\n      comment: newComment,\n      user: auth.auth.user._id,\n      name: auth.auth.user.name,\n    };\n\n    axios\n      .post(`${APIURL}posts/${post._id}/comments`, body, config)\n      .then(() => {\n        dispatch(getComments(post._id));\n        setNewComment(\"\");\n      })\n      .catch(() => {\n        store.addNotification({\n          title: \"Error!\",\n          message: \"Something went wrong uploading your comment\",\n          type: \"danger\",\n          insert: \"top\",\n          container: \"top-center\",\n          animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n          animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n          dismiss: {\n            duration: 5000,\n            onScreen: true,\n          },\n        });\n      });\n  };\n\n  const handleDelete = (comment) => {\n    const config = {\n      headers: {\n        Authorization: `Bearer ${auth.auth.token}`,\n      },\n    };\n\n    axios\n      .delete(`${APIURL}posts/${post._id}/comments/${comment._id}`, config)\n      .then(() => {\n        dispatch(deleteComment(comment._id));\n      })\n      .catch(() => {\n        store.addNotification({\n          title: \"Error!\",\n          message: \"Something went wrong deleting your comment\",\n          type: \"danger\",\n          insert: \"top\",\n          container: \"top-center\",\n          animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n          animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n          dismiss: {\n            duration: 5000,\n            onScreen: true,\n          },\n        });\n      });\n  };\n\n  return (\n    <div style={styles.card}>\n      <p style={{ ...styles.category, ...globalStyles.hint }}>\n        {post.category.charAt(0).toUpperCase() + post.category.slice(1)}\n      </p>\n      <Link to={`post/${post._id}`}>\n        <h3 style={styles.title}>{post.title}</h3>\n      </Link>\n      <div>\n        {post.content.endsWith(\"mp4\") ||\n        post.content.endsWith(\"ogg\") ||\n        post.content.endsWith(\"webm\") ? (\n          <video src={post.content} style={styles.content} controls />\n        ) : (\n          <img src={post.content} style={styles.content} alt={post.title} />\n        )}\n      </div>\n      <div style={styles.interactions}>\n        <div style={styles.interaction} onClick={() => upVotePost(post)}>\n          {!auth.auth.isAuthenticated ? (\n            <React.Fragment>\n              <MdKeyboardArrowUp style={globalStyles.icon} />\n              <p style={styles.interactionNumber}>{post.upVotes.length}</p>\n            </React.Fragment>\n          ) : checkUpvote ? (\n            <React.Fragment>\n              <MdKeyboardArrowUp\n                style={{ ...globalStyles.icon, color: colors.green }}\n              />\n              <p style={{ ...styles.interactionNumber, color: colors.green }}>\n                {post.upVotes.length}\n              </p>\n            </React.Fragment>\n          ) : (\n            <React.Fragment>\n              <MdKeyboardArrowUp style={globalStyles.icon} />\n              <p style={styles.interactionNumber}>{post.upVotes.length}</p>\n            </React.Fragment>\n          )}\n        </div>\n        <div style={styles.interaction} onClick={() => downVotePost(post)}>\n          {!auth.auth.isAuthenticated ? (\n            <React.Fragment>\n              <MdKeyboardArrowDown style={globalStyles.icon} />\n              <p style={styles.interactionNumber}>{post.downVotes.length}</p>\n            </React.Fragment>\n          ) : checkDownvote ? (\n            <React.Fragment>\n              <MdKeyboardArrowDown\n                style={{ ...globalStyles.icon, color: colors.tertiary }}\n              />\n              <p\n                style={{ ...styles.interactionNumber, color: colors.tertiary }}\n              >\n                {post.downVotes.length}\n              </p>\n            </React.Fragment>\n          ) : (\n            <React.Fragment>\n              <MdKeyboardArrowDown style={globalStyles.icon} />\n              <p style={styles.interactionNumber}>{post.downVotes.length}</p>\n            </React.Fragment>\n          )}\n        </div>\n      </div>\n      <div style={styles.commentsContainer}>\n        <h3>{`Comments (${comments.length})`}</h3>\n        <TextArea\n          value={newComment}\n          onChange={(e) => setNewComment(e.target.value)}\n          placeholder=\"Add comment...\"\n          style={styles.textArea}\n        />\n        <Button\n          style={styles.postBtn}\n          title=\"Post\"\n          handlePress={handleComment}\n        />\n      </div>\n      <div style={styles.comments}>\n        {comments\n          .slice(0)\n          .reverse()\n          .map((comment, i) => {\n            return (\n              <div style={styles.commentContainer} key={i}>\n                <div>\n                  <h5 style={styles.commentName}>{comment.name}</h5>\n                  <p style={styles.comment}>{comment.comment}</p>\n                </div>\n                <div>\n                  {comment.user === auth.auth.userId ? (\n                    <MdDelete\n                      style={{ cursor: \"pointer\" }}\n                      onClick={() => handleDelete(comment)}\n                    />\n                  ) : null}\n                </div>\n              </div>\n            );\n          })}\n      </div>\n    </div>\n  );\n};\n\nconst styles = {\n  card: {\n    backgroundColor: \"white\",\n    marginTop: 20,\n    paddingTop: 10,\n    paddingBottom: 10,\n    paddingRight: 20,\n    paddingLeft: 20,\n    borderRadius: globalStyles.borderRadius,\n    boxShadow: globalStyles.boxShadowDark,\n    maxWidth: \"100%\",\n  },\n  title: {\n    marginTop: 10,\n    marginBottom: 10,\n  },\n  category: {\n    marginTop: 0,\n    marginBottom: 10,\n  },\n  content: {\n    width: \"100%\",\n    height: \"auto\",\n  },\n  interactions: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    marginTop: 10,\n    marginBottom: 10,\n  },\n  interaction: {\n    borderRadius: globalStyles.borderRadius,\n    boxShadow: globalStyles.boxShadow,\n    paddingLeft: 10,\n    paddingRight: 10,\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    cursor: \"pointer\",\n  },\n  interactionNumber: {\n    marginLeft: 5,\n  },\n  textArea: {\n    border: `1px solid black`,\n    width: \"100%\",\n  },\n  postBtn: {\n    marginTop: 15,\n    backgroundColor: colors.tertiary,\n  },\n  comments: {\n    marginTop: 20,\n    paddingTop: 10,\n    borderTop: \"1px solid grey\",\n  },\n  commentContainer: {\n    marginTop: 20,\n    marginBottom: 20,\n    display: \"flex\",\n    justifyContent: \"space-between\",\n  },\n  commentName: {\n    margin: 0,\n    color: colors.primary,\n  },\n  comment: {\n    margin: 0,\n    marginTop: 5,\n  },\n};\n\nexport default FullMemeCard;\n"]},"metadata":{},"sourceType":"module"}