{"ast":null,"code":"var _jsxFileName = \"/Users/justin/Documents/Programming /meme-share/client/src/views/profile/AccountForm.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Button from \"../../components/UI/Button\";\nimport Input from \"../../components/UI/Input\";\nimport Loading from \"../../components/UI/Loading\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { logout, loadUser } from \"../../actions/authActions\";\nimport { useHistory } from \"react-router-dom\";\nimport colors from \"../../config/colors\";\nimport globalStyles from \"../../config/globalStyles\";\nimport { APIURL } from \"../../config/vars\";\nimport { store } from \"react-notifications-component\";\n\nconst PublisherAccount = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [emailError, setEmailError] = useState(false);\n  const [passwordError, setPasswordError] = useState(false);\n  const [newPasswordError, setNewPasswordError] = useState(false);\n  const [confirmPasswordError, setConfirmPasswordError] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const auth = useSelector(state => ({\n    auth: state.auth\n  }), []);\n  useEffect(() => {\n    setEmail(auth.auth.user.email);\n  }, [auth.auth.user.email]);\n\n  const handleLogout = () => {\n    dispatch(logout());\n    history.push(`/login`);\n  };\n\n  const handleEmailChange = e => {\n    setEmail(e.target.value);\n  };\n\n  const handlePasswordChange = e => {\n    setPassword(e.target.value);\n  };\n\n  const handleNewPasswordChange = e => {\n    setNewPassword(e.target.value);\n  };\n\n  const handleConfirmPasswordChange = e => {\n    setConfirmPassword(e.target.value);\n  };\n\n  const updateEmail = async () => {\n    const re = new RegExp(/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\n\n    if (!re.test(email)) {\n      setLoading(false);\n      setEmailError(true);\n      store.addNotification({\n        title: \"Error!\",\n        message: \"Please enter a valid email address\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true\n        }\n      });\n      return;\n    }\n\n    if (email === auth.auth.user.eamil) {\n      setLoading(false);\n      return;\n    }\n\n    const checkEmail = await axios.post(`${APIURL}check/email`, {\n      email: email.toLowerCase()\n    });\n\n    if (!checkEmail.data.success) {\n      setEmailError(true);\n      setLoading(false);\n      store.addNotification({\n        title: \"Error!\",\n        message: \"Email already in use\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true\n        }\n      });\n      return;\n    }\n\n    const body = {\n      email\n    };\n    const config = {\n      headers: {\n        Authorization: `Bearer ${auth.auth.token}`\n      }\n    };\n    axios.put(`${APIURL}auth/updatedetails`, body, config).then(res => {\n      dispatch(loadUser());\n      setLoading(false);\n      setEmailError(false);\n      store.addNotification({\n        title: \"Success!\",\n        message: \"Your email has been updated\",\n        type: \"success\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true\n        }\n      });\n    }).catch(err => {\n      setEmailError(true);\n      setLoading(false);\n      store.addNotification({\n        title: \"Error!\",\n        message: \"Oops. Something went wrong updating your email. Please try again\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true\n        }\n      });\n    });\n  };\n\n  const updatePassword = () => {\n    if (password.length < 6) {\n      setPasswordError(true);\n      setLoading(false);\n      store.addNotification({\n        title: \"Error!\",\n        message: \"Password needs to be at least 6 characters\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true\n        }\n      });\n      return;\n    }\n\n    if (newPassword.length < 6) {\n      setNewPasswordError(true);\n      setLoading(false);\n      store.addNotification({\n        title: \"Error!\",\n        message: \"New password needs to be at least 6 characters\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true\n        }\n      });\n      return;\n    }\n\n    if (newPassword !== confirmPassword) {\n      setNewPasswordError(true);\n      setConfirmPasswordError(true);\n      setLoading(false);\n      store.addNotification({\n        title: \"Error!\",\n        message: \"Passwords do not match\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true\n        }\n      });\n      return;\n    }\n\n    const body = {\n      newPassword: newPassword,\n      currentPassword: password,\n      id: auth.auth.user._id\n    };\n    const config = {\n      headers: {\n        Authorization: `Bearer ${auth.auth.token}`\n      }\n    };\n    axios.put(`${APIURL}auth/updatepassword`, body, config).then(res => {\n      setPassword(\"\");\n      setNewPassword(\"\");\n      setConfirmPassword(\"\");\n      setPasswordError(false);\n      setNewPasswordError(false);\n      setConfirmPasswordError(false);\n      setLoading(false);\n      store.addNotification({\n        title: \"Success!\",\n        message: \"Your password has been updated\",\n        type: \"success\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true\n        }\n      });\n    }).catch(err => {\n      setPasswordError(true);\n      setLoading(false);\n      store.addNotification({\n        title: \"Error!\",\n        message: \"Oops... There was an error updating your password. Please ensure you used the correct password\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true\n        }\n      });\n    });\n  };\n\n  const handleUpdate = e => {\n    e.preventDefault();\n    setEmailError(false);\n    setPasswordError(false);\n    setNewPasswordError(false);\n    setConfirmPasswordError(false);\n\n    if (email !== auth.auth.user.email && !newPassword) {\n      setLoading(true);\n      updateEmail();\n    }\n\n    if (email === auth.auth.user.email && newPassword) {\n      setLoading(true);\n      updatePassword();\n    }\n\n    if (email !== auth.auth.user.email && newPassword) {\n      setLoading(true);\n      updatePassword();\n      updateEmail();\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    style: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 9\n    }\n  }, \"Account Details\"), /*#__PURE__*/React.createElement(\"h4\", {\n    style: styles.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 9\n    }\n  }, auth.auth.user.name), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleUpdate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 9\n    }\n  }, auth.auth.user.email === \"publisher@gmail.com\" || auth.auth.user.email === \"user@gmail.com\" ? /*#__PURE__*/React.createElement(\"p\", {\n    style: globalStyles.hint,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 13\n    }\n  }, \"We don't allow email and password updates for test accounts.\") : null, /*#__PURE__*/React.createElement(Input, {\n    disabled: auth.auth.user.email === \"publisher@gmail.com\" || auth.auth.user.email === \"user@gmail.com\" ? true : false,\n    value: email,\n    onChange: handleEmailChange,\n    type: \"email\",\n    placeholder: \"Email\",\n    style: emailError ? { ...styles.input,\n      ...globalStyles.errorValidation\n    } : styles.input,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    disabled: auth.auth.user.email === \"publisher@gmail.com\" || auth.auth.user.email === \"user@gmail.com\" ? true : false,\n    value: password,\n    onChange: handlePasswordChange,\n    type: \"password\",\n    placeholder: \"Password\",\n    style: passwordError ? { ...styles.input,\n      ...globalStyles.errorValidation\n    } : styles.input,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    disabled: auth.auth.user.email === \"publisher@gmail.com\" || auth.auth.user.email === \"user@gmail.com\" ? true : false,\n    value: newPassword,\n    onChange: handleNewPasswordChange,\n    type: \"password\",\n    placeholder: \"New password\",\n    style: newPasswordError ? { ...styles.input,\n      ...globalStyles.errorValidation\n    } : styles.input,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    disabled: auth.auth.user.email === \"publisher@gmail.com\" || auth.auth.user.email === \"user@gmail.com\" ? true : false,\n    value: confirmPassword,\n    onChange: handleConfirmPasswordChange,\n    type: \"password\",\n    placeholder: \"Confrim password\",\n    style: confirmPasswordError ? { ...styles.input,\n      ...globalStyles.errorValidation\n    } : styles.input,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 11\n    }\n  }), loading ? /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 15\n    }\n  })) : /*#__PURE__*/React.createElement(Button, {\n    style: !password && email === auth.auth.user.email ? styles.disabledButton : styles.button,\n    type: \"submit\",\n    title: \"Save\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 13\n    }\n  }))));\n};\n\nconst styles = {\n  container: {\n    padding: 10,\n    paddingTop: 46,\n    maxWidth: \"100vw\",\n    minHeight: \"100vh\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    textAlign: \"center\"\n  },\n  content: {\n    padding: 40,\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  },\n  heading: {\n    fontFamily: globalStyles.titleFont,\n    color: colors.secondary\n  },\n  name: {\n    color: colors.accent\n  },\n  input: {\n    margin: 5,\n    width: \"100%\"\n  },\n  button: {\n    margin: 5,\n    width: \"100%\",\n    backgroundColor: colors.primary\n  },\n  disabledButton: {\n    margin: 5,\n    width: \"100%\",\n    backgroundColor: \"grey\",\n    cursor: \"auto\"\n  },\n  loading: {\n    width: \"100%\",\n    display: \"flex\",\n    justifyContent: \"center\"\n  },\n  sidebarBtn: {\n    boxShadow: \"none\"\n  }\n};\nexport default PublisherAccount;","map":{"version":3,"sources":["/Users/justin/Documents/Programming /meme-share/client/src/views/profile/AccountForm.jsx"],"names":["React","useState","useEffect","axios","Button","Input","Loading","useDispatch","useSelector","logout","loadUser","useHistory","colors","globalStyles","APIURL","store","PublisherAccount","dispatch","history","email","setEmail","password","setPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","emailError","setEmailError","passwordError","setPasswordError","newPasswordError","setNewPasswordError","confirmPasswordError","setConfirmPasswordError","loading","setLoading","auth","state","user","handleLogout","push","handleEmailChange","e","target","value","handlePasswordChange","handleNewPasswordChange","handleConfirmPasswordChange","updateEmail","re","RegExp","test","addNotification","title","message","type","insert","container","animationIn","animationOut","dismiss","duration","onScreen","eamil","checkEmail","post","toLowerCase","data","success","body","config","headers","Authorization","token","put","then","res","catch","err","updatePassword","length","currentPassword","id","_id","handleUpdate","preventDefault","styles","content","heading","name","hint","input","errorValidation","disabledButton","button","padding","paddingTop","maxWidth","minHeight","display","flexDirection","alignItems","textAlign","fontFamily","titleFont","color","secondary","accent","margin","width","backgroundColor","primary","cursor","justifyContent","sidebarBtn","boxShadow"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport axios from \"axios\";\n\nimport Button from \"../../components/UI/Button\";\nimport Input from \"../../components/UI/Input\";\nimport Loading from \"../../components/UI/Loading\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { logout, loadUser } from \"../../actions/authActions\";\n\nimport { useHistory } from \"react-router-dom\";\n\nimport colors from \"../../config/colors\";\nimport globalStyles from \"../../config/globalStyles\";\nimport { APIURL } from \"../../config/vars\";\n\nimport { store } from \"react-notifications-component\";\n\nconst PublisherAccount = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [emailError, setEmailError] = useState(false);\n  const [passwordError, setPasswordError] = useState(false);\n  const [newPasswordError, setNewPasswordError] = useState(false);\n  const [confirmPasswordError, setConfirmPasswordError] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  const auth = useSelector(\n    (state) => ({\n      auth: state.auth,\n    }),\n    []\n  );\n\n  useEffect(() => {\n    setEmail(auth.auth.user.email);\n  }, [auth.auth.user.email]);\n\n  const handleLogout = () => {\n    dispatch(logout());\n    history.push(`/login`);\n  };\n\n  const handleEmailChange = (e) => {\n    setEmail(e.target.value);\n  };\n\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value);\n  };\n\n  const handleNewPasswordChange = (e) => {\n    setNewPassword(e.target.value);\n  };\n\n  const handleConfirmPasswordChange = (e) => {\n    setConfirmPassword(e.target.value);\n  };\n\n  const updateEmail = async () => {\n    const re = new RegExp(\n      /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n    );\n    if (!re.test(email)) {\n      setLoading(false);\n      setEmailError(true);\n      store.addNotification({\n        title: \"Error!\",\n        message: \"Please enter a valid email address\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true,\n        },\n      });\n      return;\n    }\n\n    if (email === auth.auth.user.eamil) {\n      setLoading(false);\n      return;\n    }\n\n    const checkEmail = await axios.post(`${APIURL}check/email`, {\n      email: email.toLowerCase(),\n    });\n\n    if (!checkEmail.data.success) {\n      setEmailError(true);\n      setLoading(false);\n      store.addNotification({\n        title: \"Error!\",\n        message: \"Email already in use\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true,\n        },\n      });\n      return;\n    }\n\n    const body = {\n      email,\n    };\n\n    const config = {\n      headers: {\n        Authorization: `Bearer ${auth.auth.token}`,\n      },\n    };\n\n    axios\n      .put(`${APIURL}auth/updatedetails`, body, config)\n      .then((res) => {\n        dispatch(loadUser());\n        setLoading(false);\n        setEmailError(false);\n        store.addNotification({\n          title: \"Success!\",\n          message: \"Your email has been updated\",\n          type: \"success\",\n          insert: \"top\",\n          container: \"top-center\",\n          animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n          animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n          dismiss: {\n            duration: 5000,\n            onScreen: true,\n          },\n        });\n      })\n      .catch((err) => {\n        setEmailError(true);\n        setLoading(false);\n        store.addNotification({\n          title: \"Error!\",\n          message:\n            \"Oops. Something went wrong updating your email. Please try again\",\n          type: \"danger\",\n          insert: \"top\",\n          container: \"top-center\",\n          animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n          animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n          dismiss: {\n            duration: 5000,\n            onScreen: true,\n          },\n        });\n      });\n  };\n\n  const updatePassword = () => {\n    if (password.length < 6) {\n      setPasswordError(true);\n      setLoading(false);\n      store.addNotification({\n        title: \"Error!\",\n        message: \"Password needs to be at least 6 characters\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true,\n        },\n      });\n      return;\n    }\n\n    if (newPassword.length < 6) {\n      setNewPasswordError(true);\n      setLoading(false);\n      store.addNotification({\n        title: \"Error!\",\n        message: \"New password needs to be at least 6 characters\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true,\n        },\n      });\n      return;\n    }\n\n    if (newPassword !== confirmPassword) {\n      setNewPasswordError(true);\n      setConfirmPasswordError(true);\n      setLoading(false);\n      store.addNotification({\n        title: \"Error!\",\n        message: \"Passwords do not match\",\n        type: \"danger\",\n        insert: \"top\",\n        container: \"top-center\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true,\n        },\n      });\n      return;\n    }\n\n    const body = {\n      newPassword: newPassword,\n      currentPassword: password,\n      id: auth.auth.user._id,\n    };\n\n    const config = {\n      headers: {\n        Authorization: `Bearer ${auth.auth.token}`,\n      },\n    };\n\n    axios\n      .put(`${APIURL}auth/updatepassword`, body, config)\n      .then((res) => {\n        setPassword(\"\");\n        setNewPassword(\"\");\n        setConfirmPassword(\"\");\n        setPasswordError(false);\n        setNewPasswordError(false);\n        setConfirmPasswordError(false);\n        setLoading(false);\n        store.addNotification({\n          title: \"Success!\",\n          message: \"Your password has been updated\",\n          type: \"success\",\n          insert: \"top\",\n          container: \"top-center\",\n          animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n          animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n          dismiss: {\n            duration: 5000,\n            onScreen: true,\n          },\n        });\n      })\n      .catch((err) => {\n        setPasswordError(true);\n        setLoading(false);\n        store.addNotification({\n          title: \"Error!\",\n          message:\n            \"Oops... There was an error updating your password. Please ensure you used the correct password\",\n          type: \"danger\",\n          insert: \"top\",\n          container: \"top-center\",\n          animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n          animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n          dismiss: {\n            duration: 5000,\n            onScreen: true,\n          },\n        });\n      });\n  };\n\n  const handleUpdate = (e) => {\n    e.preventDefault();\n    setEmailError(false);\n    setPasswordError(false);\n    setNewPasswordError(false);\n    setConfirmPasswordError(false);\n    if (email !== auth.auth.user.email && !newPassword) {\n      setLoading(true);\n      updateEmail();\n    }\n\n    if (email === auth.auth.user.email && newPassword) {\n      setLoading(true);\n      updatePassword();\n    }\n\n    if (email !== auth.auth.user.email && newPassword) {\n      setLoading(true);\n      updatePassword();\n      updateEmail();\n    }\n  };\n\n  return (\n    <div style={styles.container}>\n      <div style={styles.content}>\n        <h2 style={styles.heading}>Account Details</h2>\n        <h4 style={styles.name}>{auth.auth.user.name}</h4>\n        <form onSubmit={handleUpdate}>\n          {auth.auth.user.email === \"publisher@gmail.com\" ||\n          auth.auth.user.email === \"user@gmail.com\" ? (\n            <p style={globalStyles.hint}>\n              We don't allow email and password updates for test accounts.\n            </p>\n          ) : null}\n          <Input\n            disabled={\n              auth.auth.user.email === \"publisher@gmail.com\" ||\n              auth.auth.user.email === \"user@gmail.com\"\n                ? true\n                : false\n            }\n            value={email}\n            onChange={handleEmailChange}\n            type=\"email\"\n            placeholder=\"Email\"\n            style={\n              emailError\n                ? { ...styles.input, ...globalStyles.errorValidation }\n                : styles.input\n            }\n          />\n          <Input\n            disabled={\n              auth.auth.user.email === \"publisher@gmail.com\" ||\n              auth.auth.user.email === \"user@gmail.com\"\n                ? true\n                : false\n            }\n            value={password}\n            onChange={handlePasswordChange}\n            type=\"password\"\n            placeholder=\"Password\"\n            style={\n              passwordError\n                ? { ...styles.input, ...globalStyles.errorValidation }\n                : styles.input\n            }\n          />\n          <Input\n            disabled={\n              auth.auth.user.email === \"publisher@gmail.com\" ||\n              auth.auth.user.email === \"user@gmail.com\"\n                ? true\n                : false\n            }\n            value={newPassword}\n            onChange={handleNewPasswordChange}\n            type=\"password\"\n            placeholder=\"New password\"\n            style={\n              newPasswordError\n                ? { ...styles.input, ...globalStyles.errorValidation }\n                : styles.input\n            }\n          />\n          <Input\n            disabled={\n              auth.auth.user.email === \"publisher@gmail.com\" ||\n              auth.auth.user.email === \"user@gmail.com\"\n                ? true\n                : false\n            }\n            value={confirmPassword}\n            onChange={handleConfirmPasswordChange}\n            type=\"password\"\n            placeholder=\"Confrim password\"\n            style={\n              confirmPasswordError\n                ? { ...styles.input, ...globalStyles.errorValidation }\n                : styles.input\n            }\n          />\n\n          {loading ? (\n            <div style={styles.loading}>\n              <Loading />\n            </div>\n          ) : (\n            <Button\n              style={\n                !password && email === auth.auth.user.email\n                  ? styles.disabledButton\n                  : styles.button\n              }\n              type=\"submit\"\n              title=\"Save\"\n            />\n          )}\n        </form>\n      </div>\n    </div>\n  );\n};\n\nconst styles = {\n  container: {\n    padding: 10,\n    paddingTop: 46,\n    maxWidth: \"100vw\",\n    minHeight: \"100vh\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    textAlign: \"center\",\n  },\n  content: {\n    padding: 40,\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  heading: {\n    fontFamily: globalStyles.titleFont,\n    color: colors.secondary,\n  },\n  name: {\n    color: colors.accent,\n  },\n  input: {\n    margin: 5,\n    width: \"100%\",\n  },\n  button: {\n    margin: 5,\n    width: \"100%\",\n    backgroundColor: colors.primary,\n  },\n  disabledButton: {\n    margin: 5,\n    width: \"100%\",\n    backgroundColor: \"grey\",\n    cursor: \"auto\",\n  },\n  loading: {\n    width: \"100%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n  },\n  sidebarBtn: {\n    boxShadow: \"none\",\n  },\n};\n\nexport default PublisherAccount;\n"]},"metadata":{},"sourceType":"module"}